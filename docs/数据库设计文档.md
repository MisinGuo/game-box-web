# æ•°æ®åº“è®¾è®¡æ–‡æ¡£

> ç‰ˆæœ¬ï¼šv1.0.0  
> æ—¥æœŸï¼š2025-12-13  
> é¡¹ç›®ï¼šæ¸¸æˆç›’å­å†…å®¹ç®¡ç†ç³»ç»Ÿ

---

## 1. æ•°æ®åº“æ¦‚è§ˆ

### 1.1 æ•°æ®åº“è§„åˆ’

| æ•°æ®åº“ | ç”¨é€” | å­—ç¬¦é›† |
|-------|------|--------|
| `ruoyi_system` | è‹¥ä¾ç³»ç»Ÿåº“ï¼ˆç”¨æˆ·ã€æƒé™ç­‰ï¼‰ | utf8mb4 |
| `gamebox_content` | å†…å®¹ä¸šåŠ¡åº“ï¼ˆæ–‡æ¡£ã€æ¸¸æˆï¼‰ | utf8mb4 |
| `gamebox_analytics` | ç»Ÿè®¡åˆ†æåº“ï¼ˆæ—¥å¿—ã€æŠ¥è¡¨ï¼‰ | utf8mb4 |

### 1.2 ER æ€»è§ˆå›¾

```mermaid
erDiagram
    %% æ–‡æ¡£ç›¸å…³
    gb_documents ||--o{ gb_document_game_relations : "å…³è”"
    gb_documents ||--o{ gb_document_tags : "æ ‡ç­¾"
    gb_documents }|--|| gb_categories : "æ‰€å±åˆ†ç±»"
    
    %% æ¸¸æˆç›¸å…³
    gb_games ||--o{ gb_document_game_relations : "è¢«å…³è”"
    gb_games ||--o{ gb_game_boxes : "å±äºç›’å­"
    gb_game_boxes ||--o{ gb_box_discounts : "æŠ˜æ‰£ä¿¡æ¯"
    
    %% ç»Ÿè®¡ç›¸å…³
    gb_documents ||--o{ gb_page_views : "æµè§ˆè®°å½•"
    gb_documents ||--o{ gb_search_clicks : "æœç´¢ç‚¹å‡»"
    
    %% æœç´¢ç›¸å…³
    gb_search_logs ||--o{ gb_search_clicks : "ç‚¹å‡»è®°å½•"
```

---

## 2. å†…å®¹ä¸šåŠ¡åº“è¡¨è®¾è®¡

### 2.1 æ–‡æ¡£è¡¨ (gb_documents)

å­˜å‚¨ Markdown æ–‡æ¡£çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚

```sql
CREATE TABLE `gb_documents` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `slug` varchar(255) NOT NULL COMMENT 'æ–‡æ¡£è·¯å¾„æ ‡è¯†ï¼ˆå”¯ä¸€ï¼‰',
  `title` varchar(255) NOT NULL COMMENT 'æ–‡æ¡£æ ‡é¢˜',
  `category_id` bigint DEFAULT NULL COMMENT 'åˆ†ç±»ID',
  `subcategory` varchar(100) DEFAULT NULL COMMENT 'å­åˆ†ç±»',
  `keywords` varchar(500) DEFAULT NULL COMMENT 'å…³é”®è¯ï¼Œé€—å·åˆ†éš”',
  `description` text COMMENT 'æ–‡æ¡£æè¿°/æ‘˜è¦',
  `content_preview` text COMMENT 'å†…å®¹é¢„è§ˆï¼ˆå‰500å­—ï¼‰',
  `r2_key` varchar(500) NOT NULL COMMENT 'R2 å­˜å‚¨é”®',
  `file_size` int DEFAULT 0 COMMENT 'æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰',
  `reading_time` int DEFAULT 0 COMMENT 'é¢„ä¼°é˜…è¯»æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰',
  `word_count` int DEFAULT 0 COMMENT 'å­—æ•°ç»Ÿè®¡',
  `view_count` int DEFAULT 0 COMMENT 'æµè§ˆæ¬¡æ•°',
  `like_count` int DEFAULT 0 COMMENT 'ç‚¹èµæ¬¡æ•°',
  `is_published` tinyint DEFAULT 1 COMMENT 'æ˜¯å¦å‘å¸ƒï¼š0-å¦ 1-æ˜¯',
  `is_indexed` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦å·²ç´¢å¼•åˆ°ESï¼š0-å¦ 1-æ˜¯',
  `published_at` datetime DEFAULT NULL COMMENT 'å‘å¸ƒæ—¶é—´',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted_at` datetime DEFAULT NULL COMMENT 'åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_slug` (`slug`),
  KEY `idx_category` (`category_id`),
  KEY `idx_published_at` (`published_at`),
  KEY `idx_is_published` (`is_published`),
  KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ–‡æ¡£è¡¨';
```

### 2.2 åˆ†ç±»è¡¨ (gb_categories)

```sql
CREATE TABLE `gb_categories` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `parent_id` bigint DEFAULT 0 COMMENT 'çˆ¶åˆ†ç±»IDï¼Œ0ä¸ºé¡¶çº§',
  `name` varchar(50) NOT NULL COMMENT 'åˆ†ç±»åç§°',
  `slug` varchar(50) NOT NULL COMMENT 'åˆ†ç±»æ ‡è¯†',
  `icon` varchar(100) DEFAULT NULL COMMENT 'åˆ†ç±»å›¾æ ‡',
  `description` varchar(255) DEFAULT NULL COMMENT 'åˆ†ç±»æè¿°',
  `sort_order` int DEFAULT 0 COMMENT 'æ’åºåºå·',
  `document_count` int DEFAULT 0 COMMENT 'æ–‡æ¡£æ•°é‡',
  `status` tinyint DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_slug` (`slug`),
  KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ–‡æ¡£åˆ†ç±»è¡¨';
```

### 2.3 æ¸¸æˆè¡¨ (gb_games)

```sql
CREATE TABLE `gb_games` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(100) NOT NULL COMMENT 'æ¸¸æˆåç§°',
  `short_name` varchar(50) DEFAULT NULL COMMENT 'æ¸¸æˆç®€ç§°',
  `category` varchar(50) DEFAULT NULL COMMENT 'æ¸¸æˆåˆ†ç±»ï¼ˆä»™ä¾ ã€ä¼ å¥‡ç­‰ï¼‰',
  `icon_url` varchar(500) DEFAULT NULL COMMENT 'æ¸¸æˆå›¾æ ‡URL',
  `cover_url` varchar(500) DEFAULT NULL COMMENT 'æ¸¸æˆå°é¢URL',
  `description` text COMMENT 'æ¸¸æˆæè¿°',
  `developer` varchar(100) DEFAULT NULL COMMENT 'å¼€å‘å•†',
  `package_name` varchar(200) DEFAULT NULL COMMENT 'åŒ…å',
  `version` varchar(50) DEFAULT NULL COMMENT 'ç‰ˆæœ¬å·',
  `size` varchar(50) DEFAULT NULL COMMENT 'å®‰è£…åŒ…å¤§å°',
  `download_url` varchar(500) DEFAULT NULL COMMENT 'ä¸‹è½½é“¾æ¥',
  `download_count` int DEFAULT 0 COMMENT 'ä¸‹è½½æ¬¡æ•°',
  `rating` decimal(2,1) DEFAULT 0.0 COMMENT 'è¯„åˆ†ï¼ˆ0-5ï¼‰',
  `features` json DEFAULT NULL COMMENT 'æ¸¸æˆç‰¹æ€§ï¼ˆJSONæ•°ç»„ï¼‰',
  `tags` varchar(255) DEFAULT NULL COMMENT 'æ ‡ç­¾ï¼Œé€—å·åˆ†éš”',
  `status` tinyint DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š0-ä¸‹æ¶ 1-ä¸Šæ¶',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_name` (`name`),
  KEY `idx_category` (`category`),
  KEY `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ¸¸æˆè¡¨';
```

### 2.4 æ¸¸æˆç›’å­è¡¨ (gb_game_boxes)

```sql
CREATE TABLE `gb_game_boxes` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(100) NOT NULL COMMENT 'ç›’å­åç§°',
  `logo_url` varchar(500) DEFAULT NULL COMMENT 'ç›’å­Logo',
  `description` text COMMENT 'ç›’å­æè¿°',
  `official_url` varchar(500) DEFAULT NULL COMMENT 'å®˜ç½‘åœ°å€',
  `download_url` varchar(500) DEFAULT NULL COMMENT 'ä¸‹è½½åœ°å€',
  `android_url` varchar(500) DEFAULT NULL COMMENT 'å®‰å“ä¸‹è½½',
  `ios_url` varchar(500) DEFAULT NULL COMMENT 'iOSä¸‹è½½',
  `discount_rate` decimal(3,2) DEFAULT 1.00 COMMENT 'æŠ˜æ‰£ç‡ï¼ˆ0.1-1.0ï¼‰',
  `features` json DEFAULT NULL COMMENT 'ç‰¹è‰²åŠŸèƒ½ï¼ˆJSONæ•°ç»„ï¼‰',
  `game_count` int DEFAULT 0 COMMENT 'æ”¶å½•æ¸¸æˆæ•°',
  `sort_order` int DEFAULT 0 COMMENT 'æ’åº',
  `status` tinyint DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š0-ä¸‹æ¶ 1-ä¸Šæ¶',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ¸¸æˆç›’å­è¡¨';
```

### 2.5 æ–‡æ¡£-æ¸¸æˆå…³è”è¡¨ (gb_document_game_relations)

```sql
CREATE TABLE `gb_document_game_relations` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `document_id` bigint NOT NULL COMMENT 'æ–‡æ¡£ID',
  `game_id` bigint NOT NULL COMMENT 'æ¸¸æˆID',
  `relation_type` varchar(20) DEFAULT 'auto' COMMENT 'å…³è”ç±»å‹ï¼šauto-è‡ªåŠ¨ manual-æ‰‹åŠ¨',
  `relevance_score` decimal(5,4) DEFAULT 0.0000 COMMENT 'ç›¸å…³åº¦è¯„åˆ†ï¼ˆ0-1ï¼‰',
  `is_primary` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦ä¸»å…³è”ï¼š0-å¦ 1-æ˜¯',
  `created_by` bigint DEFAULT NULL COMMENT 'åˆ›å»ºäºº',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_document_game` (`document_id`, `game_id`),
  KEY `idx_document_id` (`document_id`),
  KEY `idx_game_id` (`game_id`),
  KEY `idx_relevance` (`relevance_score` DESC)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ–‡æ¡£-æ¸¸æˆå…³è”è¡¨';
```

### 2.6 æ ‡ç­¾è¡¨ (gb_tags)

```sql
CREATE TABLE `gb_tags` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(50) NOT NULL COMMENT 'æ ‡ç­¾åç§°',
  `slug` varchar(50) NOT NULL COMMENT 'æ ‡ç­¾æ ‡è¯†',
  `color` varchar(20) DEFAULT NULL COMMENT 'æ ‡ç­¾é¢œè‰²',
  `use_count` int DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_name` (`name`),
  UNIQUE KEY `uk_slug` (`slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ ‡ç­¾è¡¨';
```

### 2.7 æ–‡æ¡£-æ ‡ç­¾å…³è”è¡¨ (gb_document_tags)

```sql
CREATE TABLE `gb_document_tags` (
  `document_id` bigint NOT NULL COMMENT 'æ–‡æ¡£ID',
  `tag_id` bigint NOT NULL COMMENT 'æ ‡ç­¾ID',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`document_id`, `tag_id`),
  KEY `idx_tag_id` (`tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ–‡æ¡£-æ ‡ç­¾å…³è”è¡¨';
```

---

## 3. ç»Ÿè®¡åˆ†æåº“è¡¨è®¾è®¡

### 3.1 æœç´¢æ—¥å¿—è¡¨ (gb_search_logs)

```sql
CREATE TABLE `gb_search_logs` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `query` varchar(255) NOT NULL COMMENT 'æœç´¢å…³é”®è¯',
  `query_normalized` varchar(255) DEFAULT NULL COMMENT 'æ ‡å‡†åŒ–åçš„å…³é”®è¯',
  `result_count` int DEFAULT 0 COMMENT 'ç»“æœæ•°é‡',
  `search_time_ms` int DEFAULT 0 COMMENT 'æœç´¢è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰',
  `filters` json DEFAULT NULL COMMENT 'ç­›é€‰æ¡ä»¶ï¼ˆJSONï¼‰',
  `user_id` bigint DEFAULT NULL COMMENT 'ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰',
  `session_id` varchar(100) DEFAULT NULL COMMENT 'ä¼šè¯ID',
  `ip_address` varchar(45) DEFAULT NULL COMMENT 'IPåœ°å€',
  `user_agent` varchar(500) DEFAULT NULL COMMENT 'ç”¨æˆ·ä»£ç†',
  `referer` varchar(500) DEFAULT NULL COMMENT 'æ¥æºé¡µé¢',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'æœç´¢æ—¶é—´',
  PRIMARY KEY (`id`),
  KEY `idx_query` (`query`),
  KEY `idx_created_at` (`created_at`),
  KEY `idx_session` (`session_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æœç´¢æ—¥å¿—è¡¨';
```

### 3.2 é¡µé¢æµè§ˆè¡¨ (gb_page_views)

```sql
CREATE TABLE `gb_page_views` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `document_id` bigint DEFAULT NULL COMMENT 'æ–‡æ¡£ID',
  `page_path` varchar(500) NOT NULL COMMENT 'é¡µé¢è·¯å¾„',
  `page_title` varchar(255) DEFAULT NULL COMMENT 'é¡µé¢æ ‡é¢˜',
  `referer` varchar(500) DEFAULT NULL COMMENT 'æ¥æºé¡µé¢',
  `user_id` bigint DEFAULT NULL COMMENT 'ç”¨æˆ·ID',
  `session_id` varchar(100) DEFAULT NULL COMMENT 'ä¼šè¯ID',
  `ip_address` varchar(45) DEFAULT NULL COMMENT 'IPåœ°å€',
  `country` varchar(50) DEFAULT NULL COMMENT 'å›½å®¶',
  `city` varchar(50) DEFAULT NULL COMMENT 'åŸå¸‚',
  `device_type` varchar(20) DEFAULT NULL COMMENT 'è®¾å¤‡ç±»å‹ï¼šmobile/tablet/desktop',
  `browser` varchar(50) DEFAULT NULL COMMENT 'æµè§ˆå™¨',
  `os` varchar(50) DEFAULT NULL COMMENT 'æ“ä½œç³»ç»Ÿ',
  `duration_seconds` int DEFAULT 0 COMMENT 'åœç•™æ—¶é•¿ï¼ˆç§’ï¼‰',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_document_id` (`document_id`),
  KEY `idx_page_path` (`page_path`(191)),
  KEY `idx_created_at` (`created_at`),
  KEY `idx_session` (`session_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='é¡µé¢æµè§ˆè®°å½•è¡¨';
```

### 3.3 æ¯æ—¥ç»Ÿè®¡æ±‡æ€»è¡¨ (gb_daily_stats)

```sql
CREATE TABLE `gb_daily_stats` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `stat_date` date NOT NULL COMMENT 'ç»Ÿè®¡æ—¥æœŸ',
  `stat_type` varchar(50) NOT NULL COMMENT 'ç»Ÿè®¡ç±»å‹',
  `dimension` varchar(100) DEFAULT 'total' COMMENT 'ç»´åº¦ï¼ˆåˆ†ç±»ã€è®¾å¤‡ç­‰ï¼‰',
  `dimension_value` varchar(100) DEFAULT NULL COMMENT 'ç»´åº¦å€¼',
  `pv` int DEFAULT 0 COMMENT 'é¡µé¢æµè§ˆé‡',
  `uv` int DEFAULT 0 COMMENT 'ç‹¬ç«‹è®¿å®¢',
  `search_count` int DEFAULT 0 COMMENT 'æœç´¢æ¬¡æ•°',
  `download_count` int DEFAULT 0 COMMENT 'ä¸‹è½½æ¬¡æ•°',
  `new_documents` int DEFAULT 0 COMMENT 'æ–°å¢æ–‡æ¡£æ•°',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_date_type_dim` (`stat_date`, `stat_type`, `dimension`, `dimension_value`),
  KEY `idx_stat_date` (`stat_date`),
  KEY `idx_stat_type` (`stat_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ¯æ—¥ç»Ÿè®¡æ±‡æ€»è¡¨';
```

### 3.4 çƒ­é—¨æœç´¢è¯è¡¨ (gb_hot_keywords)

```sql
CREATE TABLE `gb_hot_keywords` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `keyword` varchar(100) NOT NULL COMMENT 'å…³é”®è¯',
  `search_count` int DEFAULT 0 COMMENT 'æœç´¢æ¬¡æ•°',
  `click_count` int DEFAULT 0 COMMENT 'ç‚¹å‡»æ¬¡æ•°',
  `ctr` decimal(5,4) DEFAULT 0.0000 COMMENT 'ç‚¹å‡»ç‡',
  `avg_position` decimal(4,2) DEFAULT 0.00 COMMENT 'å¹³å‡æ’åä½ç½®',
  `stat_date` date NOT NULL COMMENT 'ç»Ÿè®¡æ—¥æœŸ',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_keyword_date` (`keyword`, `stat_date`),
  KEY `idx_stat_date` (`stat_date`),
  KEY `idx_search_count` (`search_count` DESC)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='çƒ­é—¨æœç´¢è¯è¡¨';
```

---

## 4. ElasticSearch ç´¢å¼•è®¾è®¡

### 4.1 æ–‡æ¡£ç´¢å¼• (documents)

```json
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1,
    "analysis": {
      "analyzer": {
        "ik_smart_synonym": {
          "type": "custom",
          "tokenizer": "ik_smart",
          "filter": ["lowercase", "synonym_filter"]
        },
        "ik_max_synonym": {
          "type": "custom",
          "tokenizer": "ik_max_word",
          "filter": ["lowercase", "synonym_filter"]
        }
      },
      "filter": {
        "synonym_filter": {
          "type": "synonym",
          "synonyms_path": "analysis/synonyms.txt"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "long" },
      "slug": { "type": "keyword" },
      "title": {
        "type": "text",
        "analyzer": "ik_max_synonym",
        "search_analyzer": "ik_smart_synonym",
        "fields": {
          "keyword": { "type": "keyword" }
        }
      },
      "category": { "type": "keyword" },
      "subcategory": { "type": "keyword" },
      "keywords": {
        "type": "text",
        "analyzer": "ik_max_synonym"
      },
      "content": {
        "type": "text",
        "analyzer": "ik_max_synonym",
        "search_analyzer": "ik_smart_synonym"
      },
      "description": { "type": "text", "analyzer": "ik_smart" },
      "tags": { "type": "keyword" },
      "view_count": { "type": "integer" },
      "like_count": { "type": "integer" },
      "published_at": { "type": "date" },
      "created_at": { "type": "date" },
      "updated_at": { "type": "date" },
      "suggest": {
        "type": "completion",
        "analyzer": "ik_smart"
      }
    }
  }
}
```

### 4.2 æ¸¸æˆç´¢å¼• (games)

```json
{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "id": { "type": "long" },
      "name": {
        "type": "text",
        "analyzer": "ik_max_word",
        "fields": { "keyword": { "type": "keyword" } }
      },
      "category": { "type": "keyword" },
      "description": { "type": "text", "analyzer": "ik_smart" },
      "tags": { "type": "keyword" },
      "features": { "type": "keyword" },
      "download_count": { "type": "integer" },
      "rating": { "type": "float" },
      "created_at": { "type": "date" }
    }
  }
}
```

---

## 5. æ•°æ®å­—å…¸

### 5.1 çŠ¶æ€æšä¸¾

| å­—æ®µ | å€¼ | è¯´æ˜ |
|------|-----|------|
| status | 0 | ç¦ç”¨/ä¸‹æ¶ |
| status | 1 | å¯ç”¨/ä¸Šæ¶ |
| is_published | 0 | æœªå‘å¸ƒ |
| is_published | 1 | å·²å‘å¸ƒ |
| relation_type | auto | è‡ªåŠ¨å…³è” |
| relation_type | manual | æ‰‹åŠ¨å…³è” |

### 5.2 åˆ†ç±»åˆå§‹æ•°æ®

| ID | åç§° | Slug | å›¾æ ‡ |
|----|------|------|------|
| 1 | ä¼ å¥‡ | chuanqi | âš”ï¸ |
| 2 | ä»™ä¾  | xianxia | ğŸ° |
| 3 | ä¸‰å›½ | sanguo | ğŸ® |
| 4 | äºŒæ¬¡å…ƒ | erciyuan | ğŸŒŸ |
| 5 | å¡ç‰Œ | kapai | ğŸƒ |
| 6 | å›åˆ | huihe | ğŸ² |
| 7 | æ”¾ç½® | fangzhi | â° |
| 8 | åŠ¨æ¼« | dongman | ğŸ“º |
| 9 | æ­¦ä¾  | wuxia | ğŸ¥· |
| 10 | è¥¿æ¸¸ | xiyou | ğŸ’ |
| 11 | é­”å¹» | mohuan | ğŸ”® |
| 12 | ç­–ç•¥ | celue | ğŸ¯ |
| 13 | å†’é™© | maoxian | ğŸ—ºï¸ |
| 14 | ç½‘æ¸¸ | wangyou | ğŸŒ |
| 15 | ä¼‘é—² | xiuxian | ğŸª |
| 16 | å‰²è‰ | gecao | âš¡ |
| 17 | å¼€ç®± | kaixiang | ğŸ“¦ |
| 18 | Qç‰ˆ | qban | ğŸ¨ |
| 19 | è§’è‰² | juese | ğŸ‘¤ |

---

## 6. ç´¢å¼•ä¼˜åŒ–å»ºè®®

### 6.1 MySQL ç´¢å¼•ç­–ç•¥

```sql
-- å¤åˆç´¢å¼•ä¼˜åŒ–æœç´¢æŸ¥è¯¢
CREATE INDEX idx_doc_category_published ON gb_documents(category_id, is_published, published_at DESC);

-- ç»Ÿè®¡æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_pv_date_doc ON gb_page_views(created_at, document_id);

-- çƒ­è¯æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_hot_date_count ON gb_hot_keywords(stat_date DESC, search_count DESC);
```

### 6.2 åˆ†åŒºç­–ç•¥

```sql
-- é¡µé¢æµè§ˆè¡¨æŒ‰æœˆåˆ†åŒº
ALTER TABLE gb_page_views PARTITION BY RANGE (TO_DAYS(created_at)) (
    PARTITION p202501 VALUES LESS THAN (TO_DAYS('2025-02-01')),
    PARTITION p202502 VALUES LESS THAN (TO_DAYS('2025-03-01')),
    PARTITION p202503 VALUES LESS THAN (TO_DAYS('2025-04-01')),
    -- ... æ›´å¤šåˆ†åŒº
    PARTITION p_future VALUES LESS THAN MAXVALUE
);
```
